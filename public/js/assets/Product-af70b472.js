import{v as k,aY as f,i as R,aZ as V,j as e,x as g,T as I,a9 as E,b as P,_ as T,B as F,C as o,d as l,a_ as C,aC as v,s as B,a$ as q,o as U,G as W,an as L,az as z,w as G,aw as H,ax as K,k as M,a4 as O,a5 as Q,r as N,u as Y,a6 as _,b0 as Z,b1 as J,b2 as X,n as ee,p as b,ay as te}from"./app-dd54c10f.js";import{s as ae,r as se,a as re,b as ne,n as oe,g as ie,c as le}from"./index-d5401baa.js";import"src/i18n";function ce(d){const n=k(),t=f(),{formState:a,watch:i,getValues:s}=t,{isValid:c,dirtyFields:r}=a,u=i("featuredImageId"),p=i("images"),m=i("name"),j=R(),h=V();function x(){n(ae(s()))}function S(){n(se()).then(()=>{h("/apps/e-commerce/products")})}return e.jsxs("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[e.jsxs("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[e.jsx(g.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:e.jsxs(I,{className:"flex items-center sm:mb-12",component:E,role:"button",to:"/apps/e-commerce/products",color:"inherit",children:[e.jsx(P,{size:20,children:j.direction==="ltr"?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),e.jsx("span",{className:"flex mx-4 font-medium",children:"Products"})]})}),e.jsxs("div",{className:"flex items-center max-w-full",children:[e.jsx(g.div,{className:"hidden sm:flex",initial:{scale:0},animate:{scale:1,transition:{delay:.3}},children:p.length>0&&u?e.jsx("img",{className:"w-32 sm:w-48 rounded",src:T.find(p,{id:u}).url,alt:m}):e.jsx("img",{className:"w-32 sm:w-48 rounded",src:"assets/images/apps/ecommerce/product-image-placeholder.png",alt:m})}),e.jsxs(g.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:[e.jsx(I,{className:"text-16 sm:text-20 truncate font-semibold",children:m||"New Product"}),e.jsx(I,{variant:"caption",className:"font-medium",children:"Product Detail"})]})]})]}),e.jsxs(g.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:[e.jsx(F,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:S,startIcon:e.jsx(P,{className:"hidden sm:flex",children:"heroicons-outline:trash"}),children:"Remove"}),e.jsx(F,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",disabled:T.isEmpty(r)||!c,onClick:x,children:"Save"})]})]})}function de(d){const n=f(),{control:t,formState:a}=n,{errors:i}=a;return e.jsxs("div",{children:[e.jsx(o,{name:"name",control:t,render:({field:s})=>{var c;return e.jsx(l,{...s,className:"mt-8 mb-16",error:!!i.name,required:!0,helperText:(c=i==null?void 0:i.name)==null?void 0:c.message,label:"Name",autoFocus:!0,id:"name",variant:"outlined",fullWidth:!0})}}),e.jsx(o,{name:"description",control:t,render:({field:s})=>e.jsx(l,{...s,className:"mt-8 mb-16",id:"description",label:"Description",type:"text",multiline:!0,rows:5,variant:"outlined",fullWidth:!0})}),e.jsx(o,{name:"categories",control:t,defaultValue:[],render:({field:{onChange:s,value:c}})=>e.jsx(C,{className:"mt-8 mb-16",multiple:!0,freeSolo:!0,options:[],value:c,onChange:(r,u)=>{s(u)},renderInput:r=>e.jsx(l,{...r,placeholder:"Select multiple categories",label:"Categories",variant:"outlined",InputLabelProps:{shrink:!0}})})}),e.jsx(o,{name:"tags",control:t,defaultValue:[],render:({field:{onChange:s,value:c}})=>e.jsx(C,{className:"mt-8 mb-16",multiple:!0,freeSolo:!0,options:[],value:c,onChange:(r,u)=>{s(u)},renderInput:r=>e.jsx(l,{...r,placeholder:"Select multiple tags",label:"Tags",variant:"outlined",InputLabelProps:{shrink:!0}})})})]})}function ue(d){const n=f(),{control:t}=n;return e.jsxs("div",{children:[e.jsx(o,{name:"sku",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16",required:!0,label:"SKU",autoFocus:!0,id:"sku",variant:"outlined",fullWidth:!0})}),e.jsx(o,{name:"quantity",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16",label:"Quantity",id:"quantity",variant:"outlined",type:"number",fullWidth:!0})})]})}function me(d){const n=f(),{control:t}=n;return e.jsxs("div",{children:[e.jsx(o,{name:"priceTaxExcl",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16",label:"Tax Excluded Price",id:"priceTaxExcl",InputProps:{startAdornment:e.jsx(v,{position:"start",children:"$"})},type:"number",variant:"outlined",autoFocus:!0,fullWidth:!0})}),e.jsx(o,{name:"priceTaxIncl",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16",label:"Tax Included Price",id:"priceTaxIncl",InputProps:{startAdornment:e.jsx(v,{position:"start",children:"$"})},type:"number",variant:"outlined",fullWidth:!0})}),e.jsx(o,{name:"taxRate",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16",label:"Tax Rate",id:"taxRate",InputProps:{startAdornment:e.jsx(v,{position:"start",children:"$"})},type:"number",variant:"outlined",fullWidth:!0})}),e.jsx(o,{name:"comparedPrice",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16",label:"Compared Price",id:"comparedPrice",InputProps:{startAdornment:e.jsx(v,{position:"start",children:"$"})},type:"number",variant:"outlined",fullWidth:!0,helperText:"Add a compare price to show next to the real price"})})]})}const pe=B("div")(({theme:d})=>({"& .productImageFeaturedStar":{position:"absolute",top:0,right:0,color:q[400],opacity:0},"& .productImageUpload":{transitionProperty:"box-shadow",transitionDuration:d.transitions.duration.short,transitionTimingFunction:d.transitions.easing.easeInOut},"& .productImageItem":{transitionProperty:"box-shadow",transitionDuration:d.transitions.duration.short,transitionTimingFunction:d.transitions.easing.easeInOut,"&:hover":{"& .productImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:d.shadows[3],"& .productImageFeaturedStar":{opacity:1},"&:hover .productImageFeaturedStar":{opacity:1}}}}));function xe(d){const n=f(),{control:t,watch:a}=n,i=a("images");return e.jsx(pe,{children:e.jsxs("div",{className:"flex justify-center sm:justify-start flex-wrap -mx-16",children:[e.jsx(o,{name:"images",control:t,render:({field:{onChange:s,value:c}})=>e.jsxs(U,{sx:{backgroundColor:r=>r.palette.mode==="light"?W(r.palette.background.default,.4):W(r.palette.background.default,.02)},component:"label",htmlFor:"button-file",className:"productImageUpload flex items-center justify-center relative w-128 h-128 rounded-16 mx-12 mb-24 overflow-hidden cursor-pointer shadow hover:shadow-lg",children:[e.jsx("input",{accept:"image/*",className:"hidden",id:"button-file",type:"file",onChange:async r=>{function u(){return new Promise((m,j)=>{const h=r.target.files[0];if(!h)return;const x=new FileReader;x.onload=()=>{m({id:z.generateGUID(),url:`data:${h.type};base64,${btoa(x.result)}`,type:"image"})},x.onerror=j,x.readAsBinaryString(h)})}const p=await u();s([p,...c])}}),e.jsx(P,{size:32,color:"action",children:"heroicons-outline:upload"})]})}),e.jsx(o,{name:"featuredImageId",control:t,defaultValue:"",render:({field:{onChange:s,value:c}})=>i.map(r=>e.jsxs("div",{onClick:()=>s(r.id),onKeyDown:()=>s(r.id),role:"button",tabIndex:0,className:L("productImageItem flex items-center justify-center relative w-128 h-128 rounded-16 mx-12 mb-24 overflow-hidden cursor-pointer outline-none shadow hover:shadow-lg",r.id===c&&"featured"),children:[e.jsx(P,{className:"productImageFeaturedStar",children:"heroicons-solid:star"}),e.jsx("img",{className:"max-w-none w-auto h-full",src:r.url,alt:"product"})]},r.id))})]})})}function he(d){const n=f(),{control:t}=n;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex -mx-4",children:[e.jsx(o,{name:"width",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16 mx-4",label:"Width",autoFocus:!0,id:"width",variant:"outlined",fullWidth:!0})}),e.jsx(o,{name:"height",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16 mx-4",label:"Height",id:"height",variant:"outlined",fullWidth:!0})}),e.jsx(o,{name:"depth",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16 mx-4",label:"Depth",id:"depth",variant:"outlined",fullWidth:!0})})]}),e.jsx(o,{name:"weight",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16",label:"Weight",id:"weight",variant:"outlined",fullWidth:!0})}),e.jsx(o,{name:"extraShippingFee",control:t,render:({field:a})=>e.jsx(l,{...a,className:"mt-8 mb-16",label:"Extra Shipping Fee",id:"extraShippingFee",variant:"outlined",InputProps:{startAdornment:e.jsx(v,{position:"start",children:"$"})},fullWidth:!0})})]})}const fe=H().shape({name:K().required("You must enter a product name").min(5,"The product name must be at least 5 characters")});function je(d){const n=k(),t=M(re),a=O(y=>y.breakpoints.down("lg")),i=Q(),[s,c]=N.useState(0),[r,u]=N.useState(!1),p=Y({mode:"onChange",defaultValues:{},resolver:te(fe)}),{reset:m,watch:j,control:h,onChange:x,formState:S}=p,A=j();_(()=>{function y(){const{productId:w}=i;w==="new"?n(oe()):n(ie(w)).then(D=>{D.payload||u(!0)})}y()},[n,i]),N.useEffect(()=>{t&&m(t)},[t,m]),N.useEffect(()=>()=>{n(ne()),u(!1)},[n]);function $(y,w){c(w)}return r?e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[e.jsx(I,{color:"text.secondary",variant:"h5",children:"There is no such product!"}),e.jsx(F,{className:"mt-24",component:E,variant:"outlined",to:"/apps/e-commerce/products",color:"inherit",children:"Go to Products Page"})]}):T.isEmpty(A)||t&&i.productId!==t.id&&i.productId!=="new"?e.jsx(Z,{}):e.jsx(J,{...p,children:e.jsx(X,{header:e.jsx(ce,{}),content:e.jsxs(e.Fragment,{children:[e.jsxs(ee,{value:s,onChange:$,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64 border-b-1"},children:[e.jsx(b,{className:"h-64",label:"Basic Info"}),e.jsx(b,{className:"h-64",label:"Product Images"}),e.jsx(b,{className:"h-64",label:"Pricing"}),e.jsx(b,{className:"h-64",label:"Inventory"}),e.jsx(b,{className:"h-64",label:"Shipping"})]}),e.jsxs("div",{className:"p-16 sm:p-24 max-w-3xl",children:[e.jsx("div",{className:s!==0?"hidden":"",children:e.jsx(de,{})}),e.jsx("div",{className:s!==1?"hidden":"",children:e.jsx(xe,{})}),e.jsx("div",{className:s!==2?"hidden":"",children:e.jsx(me,{})}),e.jsx("div",{className:s!==3?"hidden":"",children:e.jsx(ue,{})}),e.jsx("div",{className:s!==4?"hidden":"",children:e.jsx(he,{})})]})]}),scroll:a?"normal":"content"})})}const ye=G("eCommerceApp",le)(je);export{ye as default};
