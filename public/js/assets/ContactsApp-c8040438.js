import{O as N,Q as L,s as j,R as x,r as l,U as w,V as T,aN as F,j as e,W as R,X as O,v as f,E as P,aO as g,b as h,aP as k,f as B,y as U,au as v,az as E,g as M,aQ as W,aR as z,aS as D,a as $,k as p,T as i,x as m,ab as Q,aE as _,B as H,H as V,A as X,J as G,ac as C,L as J,h as q,aT as K,aU as Y,aV as Z,w as tt,F as et,a5 as at,a4 as st,a6 as nt,aW as ot,aX as ct}from"./app-dd54c10f.js";import"src/i18n";function rt(a){return N("MuiListItemAvatar",a)}L("MuiListItemAvatar",["root","alignItemsFlexStart"]);const lt=["className"],it=a=>{const{alignItems:t,classes:s}=a;return O({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},rt,s)},dt=j("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:s}=a;return[t.root,s.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({ownerState:a})=>x({minWidth:56,flexShrink:0},a.alignItems==="flex-start"&&{marginTop:8})),mt=l.forwardRef(function(t,s){const n=w({props:t,name:"MuiListItemAvatar"}),{className:o}=n,c=T(n,lt),u=l.useContext(F),d=x({},n,{alignItems:u.alignItems}),A=it(d);return e.jsx(dt,x({className:R(A.root,o),ownerState:d,ref:s},c))}),pt=mt;function ut(a){return f(),e.jsxs("div",{className:"flex flex-col flex-auto",children:[e.jsx(P,{className:"absolute top-0 right-0 my-16 mx-32 z-10",sx:{color:"white"},component:g,to:"/apps/contacts",size:"large",children:e.jsx(h,{children:"heroicons-outline:x"})}),e.jsx(k,{})]})}const S=B("contactsApp/contacts/getContacts",async(a,{getState:t})=>({data:await(await $.get("/api/contacts")).data})),r=U({}),b=({contactsApp:a})=>a.contacts.searchText,{selectAll:xt,selectById:Nt}=r.getSelectors(a=>a.contactsApp.contacts),y=v([xt,b],(a,t)=>t.length===0?a:E.filterArrayByString(a,t)),ht=v([y],a=>a.sort((t,s)=>t.name.localeCompare(s.name,"es",{sensitivity:"base"})).reduce((t,s)=>{const n=s.name[0];return t[n]?t[n].children.push(s):t[n]={group:n,children:[s]},t},{})),I=M({name:"contactsApp/contacts",initialState:r.getInitialState({searchText:""}),reducers:{setContactsSearchText:{reducer:(a,t)=>{a.searchText=t.payload},prepare:a=>({payload:a.target.value||""})}},extraReducers:{[W.fulfilled]:r.upsertOne,[z.fulfilled]:r.addOne,[D.fulfilled]:(a,t)=>r.removeOne(a,t.payload),[S.fulfilled]:(a,t)=>{const{data:s,routeParams:n}=t.payload;r.setAll(a,s),a.searchText=""}}}),{setContactsSearchText:ft}=I.actions,gt=I.reducer;function yt(a){const t=f(),s=p(b),n=p(y);return e.jsxs("div",{className:"p-24 sm:p-32 w-full border-b-1",children:[e.jsxs("div",{className:"flex flex-col items-center sm:items-start",children:[e.jsx(i,{component:m.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-24 md:text-32 font-extrabold tracking-tight leading-none",children:"Contacts"}),e.jsx(i,{component:m.span,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},delay:500,className:"text-14 font-medium ml-2",color:"text.secondary",children:`${n.length} contacts`})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-16 sm:space-y-0 flex-1 items-center mt-16 -mx-8",children:[e.jsxs(Q,{component:m.div,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex flex-1 w-full sm:w-auto items-center px-16 mx-8 border-1 rounded-full",children:[e.jsx(h,{color:"action",size:20,children:"heroicons-outline:search"}),e.jsx(_,{placeholder:"Search contacts",className:"flex flex-1 px-16",disableUnderline:!0,fullWidth:!0,value:s,inputProps:{"aria-label":"Search"},onChange:o=>t(ft(o))})]}),e.jsxs(H,{className:"mx-8",variant:"contained",color:"secondary",component:g,to:"new/edit",children:[e.jsx(h,{size:20,children:"heroicons-outline:plus"}),e.jsx("span",{className:"mx-8",children:"Add"})]})]})]})}function jt(a){const{contact:t}=a;return e.jsxs(e.Fragment,{children:[e.jsxs(V,{className:"px-32 py-16",sx:{bgcolor:"background.paper"},button:!0,component:g,to:`/apps/contacts/${t.id}`,children:[e.jsx(pt,{children:e.jsx(X,{alt:t.name,src:t.avatar})}),e.jsx(G,{classes:{root:"m-0",primary:"font-medium leading-5 truncate"},primary:t.name,secondary:e.jsx(e.Fragment,{children:e.jsx(i,{className:"inline",component:"span",variant:"body2",color:"text.secondary",children:t.title})})})]}),e.jsx(C,{})]})}function vt(a){const t=p(y),s=p(ht);return t?t.length===0?e.jsx("div",{className:"flex flex-1 items-center justify-center h-full",children:e.jsx(i,{color:"text.secondary",variant:"h5",children:"There are no contacts!"})}):e.jsx(m.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex flex-col flex-auto w-full max-h-full",children:Object.entries(s).map(([n,o])=>e.jsxs("div",{className:"relative",children:[e.jsx(i,{color:"text.secondary",className:"px-32 py-4 text-14 font-medium",children:n}),e.jsx(C,{}),e.jsx(J,{className:"w-full m-0 p-0",children:o.children.map(c=>e.jsx(jt,{contact:c},c.id))})]},n))}):null}const Ct=q({tags:K,countries:Y,contacts:gt,contact:Z}),St=j(et)(({theme:a})=>({"& .FusePageSimple-header":{backgroundColor:a.palette.background.paper}}));function bt(a){const t=f(),s=l.useRef(null),n=at(),[o,c]=l.useState(!1),u=st(d=>d.breakpoints.down("lg"));return nt(()=>{t(S()),t(ot()),t(ct())},[t]),l.useEffect(()=>{c(!!n.id)},[n]),e.jsx(St,{header:e.jsx(yt,{pageLayout:s}),content:e.jsx(vt,{}),ref:s,rightSidebarContent:e.jsx(ut,{}),rightSidebarOpen:o,rightSidebarOnClose:()=>c(!1),rightSidebarWidth:640,scroll:u?"normal":"content"})}const Lt=tt("contactsApp",Ct)(bt);export{Lt as default};
