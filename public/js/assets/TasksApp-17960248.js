import{j as e,aP as I,f,y as L,au as D,g as P,cL as g,cM as R,cN as O,a as j,cO as C,k,T as d,x as u,B as h,aO as p,b as l,v as m,H as y,an as z,b4 as E,E as F,J as b,bP as B,ac as w,L as H,h as M,cP as $,cQ as Q,w as J,s as W,F as q,r as x,a5 as G,a4 as K,a6 as U,cR as V}from"./app-dd54c10f.js";import{P as T,D as X,C as Y}from"./react-beautiful-dnd.esm-30d7ebac.js";import"src/i18n";function Z(t){return e.jsx("div",{className:"flex flex-col flex-auto",children:e.jsx(I,{})})}const N=f("tasksApp/tasks/getTasks",async(t,{getState:s})=>await(await j.get("/api/tasks")).data),S=f("tasksApp/tasks/reorder",async({startIndex:t,endIndex:s},{dispatch:n,getState:i})=>{const r=await(await j.post("/api/tasks/reorder",{startIndex:t,endIndex:s})).data;return n(C({message:"List Order Saved",autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"right"}})),r}),c=L({}),{selectAll:v,selectById:xe}=c.getSelectors(t=>t.tasksApp.tasks),_=D([v],t=>t.filter(s=>s.type==="task"&&!s.completed).length),ee=P({name:"tasksApp/tasks",initialState:c.getInitialState(),extraReducers:{[S.fulfilled]:c.setAll,[g.fulfilled]:c.upsertOne,[R.fulfilled]:c.addOne,[O.fulfilled]:(t,s)=>c.removeOne(t,s.payload),[N.fulfilled]:c.setAll}}),se=ee.reducer;function te(t){const s=k(_);return e.jsxs("div",{className:"flex flex-col sm:flex-row item-center sm:items-start space-y-16 sm:space-y-0 p-24 sm:p-32 w-full border-b-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:space-x-12",children:[e.jsx(d,{component:u.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-24 md:text-32 font-extrabold tracking-tight leading-none",children:"Tasks"}),e.jsx(d,{component:u.span,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},delay:500,className:"text-14 font-medium ml-2",color:"text.secondary",children:`${s} remaining tasks`})]}),e.jsxs("div",{className:"flex items-center -mx-8",children:[e.jsxs(h,{className:"mx-8 whitespace-nowrap",component:p,to:"new/section",children:[e.jsx(l,{size:20,children:"heroicons-outline:plus"}),e.jsx("span",{className:"mx-8",children:"Add Section"})]}),e.jsxs(h,{className:"mx-8 whitespace-nowrap",variant:"contained",color:"secondary",component:p,to:"new/task",children:[e.jsx(l,{size:20,children:"heroicons-outline:plus"}),e.jsx("span",{className:"mx-8",children:"Add Task"})]})]})]})}function ae(t){const{data:s,index:n}=t,i=m();return e.jsx(T,{draggableId:s.id,index:n,type:"list",children:(a,r)=>e.jsxs(e.Fragment,{children:[e.jsxs(y,{className:z(r.isDragging?"shadow-lg":"shadow","px-40 py-12 group"),sx:{bgcolor:"background.paper"},button:!0,component:p,to:`/apps/tasks/${s.id}`,ref:a.innerRef,...a.draggableProps,children:[e.jsx("div",{className:"md:hidden absolute flex items-center justify-center inset-y-0 left-0 w-32 cursor-move md:group-hover:flex",...a.dragHandleProps,children:e.jsx(l,{sx:{color:"text.disabled"},size:20,children:"heroicons-solid:menu"})}),e.jsx(E,{className:"min-w-40 -ml-10 mr-8",children:e.jsx(F,{sx:{color:s.completed?"secondary.main":"text.disabled"},onClick:o=>{o.preventDefault(),o.stopPropagation(),i(g({...s,completed:!s.completed}))},children:e.jsx(l,{children:"heroicons-outline:check-circle"})})}),e.jsx(b,{classes:{root:"m-0",primary:"truncate"},primary:s.title}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{children:[s.priority===0&&e.jsx(l,{className:"text-green icon-size-16 mx-12",children:"heroicons-outline:arrow-narrow-down"}),s.priority===2&&e.jsx(l,{className:"text-red icon-size-16 mx-12",children:"heroicons-outline:arrow-narrow-up"})]}),s.dueDate&&e.jsx(d,{className:"text-12 whitespace-nowrap",color:"text.secondary",children:B(new Date(s.dueDate),"LLL dd")})]})]}),e.jsx(w,{})]})})}function ne(t){const{data:s,index:n}=t;return e.jsx(T,{draggableId:s.id,index:n,type:"list",children:(i,a)=>e.jsxs(e.Fragment,{children:[e.jsxs(y,{className:"px-40 py-12 group",sx:{bgcolor:"background.default"},button:!0,component:p,to:`/apps/tasks/${s.id}`,ref:i.innerRef,...i.draggableProps,children:[e.jsx("div",{className:"md:hidden absolute flex items-center justify-center inset-y-0 left-0 w-32 cursor-move md:group-hover:flex",...i.dragHandleProps,children:e.jsx(l,{sx:{color:"text.disabled"},size:20,children:"heroicons-solid:menu"})}),e.jsx(b,{classes:{root:"m-0",primary:"font-semibold text-16 truncate"},primary:s.title})]}),e.jsx(w,{})]})})}function re(t){const s=m(),n=k(v);if(!n)return null;if(n.length===0)return e.jsx("div",{className:"flex flex-1 items-center justify-center h-full",children:e.jsx(d,{color:"text.secondary",variant:"h5",children:"There are no tasks!"})});function i(a){a.destination&&a.destination.index!==a.source.index&&s(S({arr:n,startIndex:a.source.index,endIndex:a.destination.index}))}return e.jsx(H,{className:"w-full m-0 p-0",children:e.jsx(X,{onDragEnd:i,children:e.jsx(Y,{droppableId:"list",type:"list",direction:"vertical",children:a=>e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:a.innerRef,children:n.map((r,o)=>r.type==="task"?e.jsx(ae,{data:r,index:o},r.id):r.type==="section"?e.jsx(ne,{index:o,data:r},r.id):null)}),a.placeholder]})})})})}const ie=M({tags:$,tasks:se,task:Q}),oe=W(q)(({theme:t})=>({"& .FusePageSimple-header":{backgroundColor:t.palette.background.paper}}));function ce(t){const s=m(),n=x.useRef(null),i=G(),[a,r]=x.useState(!1),o=K(A=>A.breakpoints.down("lg"));return U(()=>{s(N()),s(V())},[s]),x.useEffect(()=>{r(!!i.id)},[i]),e.jsx(oe,{header:e.jsx(te,{pageLayout:n}),content:e.jsx(re,{}),ref:n,rightSidebarContent:e.jsx(Z,{}),rightSidebarOpen:a,rightSidebarOnClose:()=>r(!1),rightSidebarWidth:640,scroll:o?"normal":"content"})}const me=J("tasksApp",ie)(ce);export{me as default};
