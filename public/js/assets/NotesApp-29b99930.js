import{f as S,y as ue,g as me,a as D,_ as j,aw as H,ax as T,v as N,u as q,ay as U,j as t,H as P,C as w,d as _,an as v,aC as F,b as d,E as g,r as C,aF as he,k as y,aL as pe,T as k,L as Y,au as Re,az as fe,aM as Me,aE as Z,aA as Ve,c3 as xe,J as O,aB as Be,q as be,bP as ge,am as je,a9 as We,c4 as He,c5 as K,b5 as ye,a5 as G,b6 as qe,c6 as Ue,t as A,B as ie,c7 as _e,P as Ye,b9 as V,x as J,af as Ge,bV as Je,a8 as Ke,s as Ce,aO as B,h as Qe,w as Xe,b2 as Ze,a4 as et,o as tt,G as oe}from"./app-dd54c10f.js";import"src/i18n";const Ne=S("notesApp/labels/getLabels",async()=>await(await D.get("/api/notes/labels")).data),we=S("notesApp/labels/createLabel",async e=>await(await D.post("/api/notes/labels",e)).data),ve=S("notesApp/labels/updateLabel",async e=>await(await D.put(`/api/notes/labels/${e.id}`,e)).data),ke=S("notesApp/labels/removeLabel",async e=>await(await D.delete(`/api/notes/labels/${e}`)).data),I=ue({}),{selectAll:te,selectEntities:nt,selectById:Jt}=I.getSelectors(e=>e.notesApp.labels),Se=me({name:"notesApp/labels",initialState:I.getInitialState({labelsDialogOpen:!1}),reducers:{openLabelsDialog:(e,n)=>{e.labelsDialogOpen=!0},closeLabelsDialog:(e,n)=>{e.labelsDialogOpen=!1}},extraReducers:{[Ne.fulfilled]:I.setAll,[ve.fulfilled]:I.upsertOne,[ke.fulfilled]:I.removeOne,[we.fulfilled]:I.addOne}}),{openLabelsDialog:st,closeLabelsDialog:at}=Se.actions,lt=({notesApp:e})=>e.labels.labelsDialogOpen,it=Se.reducer;function ot(e){return e=e||{},j.defaults(e,{title:""})}const re={title:""},rt=H().shape({title:T().required("You must enter a label title")});function ct(e){const n=N(),{control:s,formState:a,handleSubmit:l,reset:i}=q({mode:"onChange",defaultValues:re,resolver:U(rt)}),{isValid:o,dirtyFields:r,errors:m}=a;function c(u){const h=ot(u);n(we(h)),i(re)}return t.jsx("form",{onSubmit:l(c),children:t.jsx(P,{className:"p-0 mb-16",dense:!0,children:t.jsx(w,{name:"title",control:s,render:({field:u})=>{var h;return t.jsx(_,{...u,className:v("flex flex-1"),error:!!m.title,helperText:(h=m==null?void 0:m.title)==null?void 0:h.message,placeholder:"Create new label",variant:"outlined",InputProps:{startAdornment:t.jsx(F,{position:"start",children:t.jsx(d,{color:"action",children:"heroicons-outline:tag"})}),endAdornment:t.jsx(F,{position:"end",children:t.jsx(g,{className:"w-32 h-32 p-0","aria-label":"Delete",disabled:j.isEmpty(r)||!o,type:"submit",size:"large",children:t.jsx(d,{color:"action",size:20,children:"heroicons-outline:check"})})})}})}})})})}const dt=H().shape({title:T().required("You must enter a label title")});function ut(e){const{label:n}=e,s=N(),{control:a,formState:l,handleSubmit:i,reset:o,watch:r}=q({mode:"onChange",defaultValues:n,resolver:U(dt)}),{isValid:m,dirtyFields:c,errors:u}=l,h=r();C.useEffect(()=>{o(n)},[n,o]);const b=he(($,x)=>{$&&h&&!j.isEqual(x,$)&&s(ve(x))},300);C.useEffect(()=>{b(n,h)},[b,n,h]);function E(){s(ke(n.id))}return t.jsx(t.Fragment,{children:t.jsx(P,{className:"p-0 mb-16",dense:!0,children:t.jsx(w,{name:"title",control:a,render:({field:$})=>{var x;return t.jsx(_,{...$,className:v("flex flex-1"),error:!!u.title,helperText:(x=u==null?void 0:u.title)==null?void 0:x.message,placeholder:"Create new label",variant:"outlined",InputProps:{startAdornment:t.jsx(F,{position:"start",children:t.jsx(d,{color:"action",children:"heroicons-outline:tag"})}),endAdornment:t.jsx(F,{position:"end",children:t.jsx(g,{onClick:E,className:"w-32 h-32 p-0","aria-label":"Delete",size:"large",children:t.jsx(d,{color:"action",size:20,children:"heroicons-outline:trash"})})})}})}})})})}function mt(e){const n=N(),s=y(lt),a=y(te);return t.jsxs(pe,{classes:{paper:"w-full max-w-320 p-24 md:p-40 m-24"},onClose:l=>n(at()),open:s,children:[t.jsx(k,{className:"text-20 mb-24 font-semibold",children:"Edit Labels"}),t.jsxs(Y,{dense:!0,children:[t.jsx(ct,{}),a.map(l=>t.jsx(ut,{label:l},l.id))]})]})}const ne=S("notesApp/notes/getNotes",async e=>{const{filter:n,id:s}=e;let a;return e.filter==="labels"&&(a=`/api/notes/labels/${s}`),e.filter==="archive"&&(a="/api/notes/archive"),e.filter==="reminders"&&(a="/api/notes/reminders"),e.filter||(a="/api/notes"),await(await D.get(a)).data}),De=S("notesApp/notes/createNote",async e=>await(await D.post("/api/notes",e)).data),Le=S("notesApp/notes/updateNote",async e=>await(await D.put(`/api/notes/${e.id}`,e)).data),Ae=S("notesApp/notes/removeNote",async(e,{dispatch:n,getState:s})=>{const l=await(await D.delete(`/api/notes/${e}`)).data;return n(ee()),l}),z=ue({}),{selectAll:ht,selectEntities:pt,selectById:Kt}=z.getSelectors(e=>e.notesApp.notes),Oe=me({name:"notesApp/notes",initialState:z.getInitialState({searchText:"",noteDialogId:null,variateDescSize:!0}),reducers:{setNotesSearchText:{reducer:(e,n)=>{e.searchText=n.payload},prepare:e=>({payload:e.target.value||""})},resetNotesSearchText:(e,n)=>{e.searchText=""},toggleVariateDescSize:(e,n)=>{e.variateDescSize=!e.variateDescSize},openNoteDialog:(e,n)=>{e.noteDialogId=n.payload},closeNoteDialog:(e,n)=>{e.noteDialogId=n.null}},extraReducers:{[ne.fulfilled]:z.setAll,[De.fulfilled]:z.addOne,[Le.fulfilled]:z.upsertOne,[Ae.fulfilled]:z.removeOne}}),{setNotesSearchText:ft,resetNotesSearchText:Qt,toggleVariateDescSize:xt,openNoteDialog:bt,closeNoteDialog:ee}=Oe.actions,Ie=({notesApp:e})=>e.notes.variateDescSize,ze=({notesApp:e})=>e.notes.searchText,gt=({notesApp:e})=>e.notes.noteDialogId,jt=Re([gt,pt],(e,n)=>n[e]),yt=Oe.reducer;function Ct(e){return e=e||{},j.defaults(e,{id:fe.generateGUID(),content:"",completed:!1})}const ce={content:""},Nt=H().shape({content:T().required("You must enter a label title")});function wt(e){const{control:n,formState:s,handleSubmit:a,reset:l}=q({mode:"onChange",defaultValues:ce,resolver:U(Nt)}),{isValid:i,dirtyFields:o,errors:r}=s;function m(c){e.onListItemAdd(Ct(c)),l(ce)}return t.jsx("form",{onSubmit:a(m),children:t.jsx(P,{className:"p-0",dense:!0,children:t.jsx(w,{name:"content",control:n,render:({field:c})=>{var u;return t.jsx(_,{...c,className:"flex flex-1",error:!!r.content,helperText:(u=r==null?void 0:r.content)==null?void 0:u.message,placeholder:"Add an item",variant:"standard",autoFocus:!0,hiddenLabel:!0,InputProps:{disableUnderline:!0,className:"px-2",startAdornment:t.jsx(F,{position:"start",children:t.jsx(g,{className:"w-32 h-32 p-0 -mx-6","aria-label":"Add",type:"submit",disabled:j.isEmpty(o)||!i,size:"large",children:t.jsx(d,{size:20,children:"heroicons-outline:plus"})})})}})}})})})}function vt(e){function n(s){e.onListItemChange(j.setIn(e.item,s.target.name,s.target.type==="checkbox"?s.target.checked:s.target.value))}return e.item?t.jsxs(P,{className:"p-0",dense:!0,children:[t.jsx(Me,{className:"p-0",checked:e.item.completed,tabIndex:-1,disableRipple:!0,name:"completed",onChange:n,color:"default"}),t.jsx(Z,{className:v("flex flex-1 mx-8",e.item.completed&&"line-through opacity-50"),name:"text",value:e.item.content,onChange:n,disableUnderline:!0}),t.jsx(g,{className:"w-32 h-32 mx-4 p-0","aria-label":"Delete",onClick:()=>e.onListItemRemove(e.item.id),size:"large",children:t.jsx(d,{size:20,children:"heroicons-outline:trash"})})]},e.item.id):null}function kt(e){function n(l){e.onCheckListChange(e.tasks.map(i=>i.id===l.id?l:i))}function s(l){e.onCheckListChange(e.tasks.filter(i=>i.id!==l))}function a(l){e.onCheckListChange([...e.tasks,l])}return e.tasks?t.jsx("div",{className:e.className,children:t.jsxs(Y,{dense:!0,children:[e.tasks.map(l=>t.jsx(vt,{item:l,onListItemChange:n,onListItemRemove:s},l.id)),t.jsx(wt,{onListItemAdd:a})]})}):null}function St(e){const n=y(te),[s,a]=C.useState(null);function l(r){r.stopPropagation(),a(r.currentTarget)}function i(){a(null)}function o(r){e.onChange(j.xor(e.note.labels,[r]))}return t.jsxs("div",{children:[t.jsx(g,{className:"w-32 h-32 mx-4 p-0",onClick:l,size:"large",children:t.jsx(d,{size:20,children:"heroicons-outline:tag"})}),t.jsx(Ve,{hideBackdrop:!0,open:!!s,anchorEl:s,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},className:"pointer-events-none",classes:{paper:"pointer-events-auto py-8 prevent-add-close"},children:t.jsx(xe,{onClickAway:i,children:t.jsx(Y,{className:"p-0",children:n.map(r=>t.jsxs(P,{button:!0,dense:!0,onClick:()=>o(r.id),children:[t.jsx(d,{className:"list-item-icon",size:20,color:"action",children:e.note.labels.includes(r.id)?"heroicons-outline:check-circle":"heroicons-outline:minus-circle"}),t.jsx(O,{className:"truncate px-8",primary:r.title,disableTypography:!0})]},r.id))})})})]})}function Dt(e){const n=new Date(e.reminder);return t.jsx(Be,{clearable:!0,showTodayButton:!0,disablePast:!0,value:n,onChange:e.onChange,renderInput:s=>t.jsx(_,{sx:{"& .MuiInputAdornment-root":{minWidth:40,minHeight:40,m:0},"& .MuiOutlinedInput-notchedOutline":{display:"none"},"& .MuiOutlinedInput-root":{padding:0},"& .MuiInputBase-input":{position:"absolute",pointerEvents:"none",visibility:"hidden"}},...s}),components:{OpenPickerIcon:()=>t.jsx(d,{size:20,children:"heroicons-outline:bell"})}})}function Lt(e){function n(s){const a=s.target.files[0];if(!a)return;const l=new FileReader;l.readAsBinaryString(a),l.onload=()=>{e.onChange&&e.onChange(`data:${a.type};base64,${btoa(l.result)}`)},l.onerror=()=>{console.log("error on load image")}}return t.jsx(t.Fragment,{children:t.jsxs("label",{htmlFor:"button-file",children:[t.jsx("input",{accept:"image/*",className:"hidden",id:"button-file",type:"file",onChange:n}),t.jsx(g,{className:"w-32 h-32 mx-4 p-0",component:"span",size:"large",children:t.jsx(d,{size:20,children:"heroicons-outline:photograph"})})]})})}function At(e){return e=e||{},j.defaults(e,{title:"",content:"",tasks:[],image:"",reminder:null,labels:[],archived:!1,createdAt:null,updatedAt:null})}function Te(e){return e.date?t.jsx(be,{icon:t.jsx(d,{size:16,children:"heroicons-outline:clock"}),label:ge(new Date(e.date),"MMM dd yy, h:mm"),classes:{root:v("h-24 border-0",e.className),label:"px-12 py-4 text-12 font-medium leading-none",deleteIcon:"w-16",...e.classes},sx:{color:"text.secondary",backgroundColor:n=>je(n.palette.background.default,.03)},variant:"outlined",onDelete:e.onDelete}):null}function Fe(e){const n=y(nt);if(!n)return null;const s=n[e.id];if(!s)return null;const a=e.linkable?{element:We,onClick:l=>{l.stopPropagation()},to:`/apps/notes/labels/${s.id}`}:{};return t.jsx(be,{...a,label:s.title,classes:{root:v("h-24 border-0",e.className),label:"px-12 py-4 text-12 font-medium leading-none",deleteIcon:"w-16",...e.classes},sx:{color:"text.secondary",backgroundColor:l=>je(l.palette.background.default,.03)},variant:"outlined",onDelete:e.onDelete})}const Ot=H().shape({title:T(),content:T(),image:T(),tasks:He(),oneOfThemRequired:K().when(["title","content","image","tasks"],{is:(e,n,s,a)=>!e&&!n&&!s&&!a||!!e&&!!n&&!!s&&!!a,then:K().required(""),otherwise:K()})});function se(e){const[n,s]=C.useState(!1),a=G();N();const l=j.merge({},At(),e.note,a.labelId?{labels:[a.labelId]}:null,a.id==="archive"?{archived:!0}:null),{formState:i,handleSubmit:o,getValues:r,reset:m,watch:c,setValue:u,control:h}=q({mode:"onChange",defaultValues:l,resolver:U(Ot)}),{isValid:b,dirtyFields:E,errors:$}=i,x=c();C.useEffect(()=>{!e.note||e.variant==="new"||!e.onChange||j.isEqual(e.note,x)||e.onChange(x)},[x,e,l]);function le(p){e.onCreate&&e.onCreate(p)}return t.jsxs("div",{className:"flex flex-col w-full",children:[t.jsx(qe,{className:"flex flex-auto w-full max-h-640",children:t.jsxs("div",{className:"w-full",children:[t.jsx(w,{name:"image",control:h,defaultValue:"",render:({field:{onChange:p,value:f}})=>!f||f===""?null:t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:f,className:"w-full block",alt:"note"}),t.jsx(Ue,{className:"absolute right-0 bottom-0 m-8",variant:"extended",size:"small",color:"secondary","aria-label":"Delete Image",type:"button",onClick:()=>p(""),children:t.jsx(d,{size:20,children:"heroicons-outline:trash"})})]})}),t.jsx("div",{className:"px-20 my-16",children:t.jsx(w,{name:"title",control:h,render:({field:p})=>t.jsx(Z,{...p,className:"font-semibold text-14",placeholder:"Title",type:"text",disableUnderline:!0,fullWidth:!0})})}),t.jsx("div",{className:"px-20 my-16",children:t.jsx(w,{name:"content",control:h,render:({field:p})=>t.jsx(Z,{...p,placeholder:"Take a note...",multiline:!0,rows:"4",disableUnderline:!0,fullWidth:!0})})}),t.jsx(w,{name:"tasks",control:h,defaultValue:[],render:({field:{onChange:p,value:f}})=>(f==null?void 0:f.length)===0&&!n||!f&&!n?null:t.jsx("div",{className:"px-16",children:t.jsx(kt,{tasks:f||[],onCheckListChange:L=>p(L)})})}),(x.labels||x.reminder||x.createdAt)&&t.jsxs("div",{className:"flex flex-wrap w-full px-20 my-16 -mx-4",children:[x.reminder&&t.jsx(Te,{className:"mt-4 mx-4",date:x.reminder,onDelete:()=>{u("reminder",null)}}),t.jsx(w,{name:"labels",control:h,defaultValue:[],render:({field:{onChange:p,value:f}})=>f?f.map(L=>t.jsx(Fe,{id:L,className:"mt-4 mx-4",onDelete:()=>p(f.filter($e=>$e!==L))},L)):null}),x.createdAt&&t.jsxs(k,{color:"text.secondary",className:"text-12 mt-8 mx-4",children:["Edited: ",ge(new Date(x.createdAt),"MMM dd yy, h:mm")]})]})]})}),t.jsxs("div",{className:"flex flex-auto justify-between items-center px-16 pb-12",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(A,{title:"Remind me",placement:"bottom",children:t.jsx("div",{children:t.jsx(w,{name:"reminder",control:h,defaultValue:[],render:({field:{onChange:p,value:f}})=>t.jsx(Dt,{reminder:f,onChange:L=>p(L)})})})}),t.jsx(A,{title:"Add image",placement:"bottom",children:t.jsx("div",{children:t.jsx(Lt,{onChange:p=>u("image",p,{shouldDirty:!0,shouldValidate:!0})})})}),t.jsx(A,{title:"Add tasks",placement:"bottom",children:t.jsx(g,{className:"w-32 h-32 mx-4 p-0",onClick:()=>s(!n),size:"large",children:t.jsx(d,{size:20,children:"heroicons-outline:pencil-alt"})})}),t.jsx(A,{title:"Change labels",placement:"bottom",children:t.jsx("div",{children:t.jsx(St,{note:x,onChange:p=>u("labels",p)})})}),t.jsx(w,{name:"archived",control:h,defaultValue:!1,render:({field:{onChange:p,value:f}})=>t.jsx(A,{title:f?"Unarchive":"Archive",placement:"bottom",children:t.jsx("div",{children:t.jsx(g,{className:"w-32 h-32 mx-4 p-0",onClick:()=>{p(!f),e.variant==="new"&&setTimeout(()=>le(r()))},size:"large",children:t.jsx(d,{size:20,children:f?"heroicons-solid:archive":"heroicons-outline:archive"})})})})})]}),t.jsx("div",{className:"flex items-center",children:e.variant==="new"?t.jsx(ie,{className:"m-4 p-8",type:"submit",variant:"contained",color:"secondary",size:"small",onClick:o(le),disabled:j.isEmpty(E)||!b,children:"Create"}):t.jsxs(t.Fragment,{children:[t.jsx(A,{title:"Delete Note",placement:"bottom",children:t.jsx(g,{className:"w-32 h-32 mx-4 p-0",onClick:e.onRemove,size:"large",children:t.jsx(d,{size:20,children:"heroicons-outline:trash"})})}),t.jsx(ie,{className:"m-4",onClick:e.onClose,variant:"default",children:"Close"})]})})]})]})}se.propTypes={};se.defaultProps={variant:"edit",note:null};const Pe=ye(se),It=C.forwardRef(function(n,s){return t.jsx(_e,{direction:"up",ref:s,...n})});function zt(e){const n=N(),s=G(),a=y(jt),l=he(o=>{n(Le(o)).then(()=>{n(ne(s))})},600);function i(){n(Ae(a==null?void 0:a.id))}return a?t.jsx(pe,{classes:{paper:"w-full m-24"},TransitionComponent:It,onClose:o=>n(ee()),open:!!(a!=null&&a.id),children:t.jsx(Pe,{note:a,onChange:l,onClose:o=>n(ee()),onRemove:i})}):null}function Tt(e){const n=N(),[s,a]=C.useState(!1);function l(c){c.stopPropagation(),a(!0),document.addEventListener("keydown",r,!1)}function i(){s&&(a(!1),document.removeEventListener("keydown",r,!1))}function o(c){n(De(c)),i()}function r(c){c.keyCode===27&&i()}function m(c){const u=document.querySelector(".prevent-add-close");u&&u.contains(c.target)||i()}return t.jsx(Ye,{className:"flex items-center w-full max-w-512 mt-8 mb-16 min-h-48 shadow shrink-0 cursor-text",children:s?t.jsx(xe,{onClickAway:m,children:t.jsx("div",{className:"w-full",children:t.jsx(Pe,{onCreate:o,variant:"new"})})}):t.jsx(k,{className:"w-full px-16 py-12 text-16 w-full",color:"text.secondary",onClick:l,children:"Take a note..."})})}function Ft(e,n){if(e==null)return{};var s=Pt(e,n),a,l;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)a=i[l],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function Pt(e,n){if(e==null)return{};var s={},a=Object.keys(e),l,i;for(i=0;i<a.length;i++)l=a[i],!(n.indexOf(l)>=0)&&(s[l]=e[l]);return s}function W(){return W=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},W.apply(this,arguments)}function de(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),s.push.apply(s,a)}return s}function R(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?de(Object(s),!0).forEach(function(a){Et(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):de(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Et(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}const $t={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},Q=2;class Ee extends V.Component{constructor(n){super(n),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let s;this.props.breakpointCols&&this.props.breakpointCols.default?s=this.props.breakpointCols.default:s=parseInt(this.props.breakpointCols)||Q,this.state={columnCount:s}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const n=window&&window.innerWidth||1/0;let s=this.props.breakpointCols;typeof s!="object"&&(s={default:parseInt(s)||Q});let a=1/0,l=s.default||Q;for(let i in s){const o=parseInt(i);o>0&&n<=o&&o<a&&(a=o,l=s[i])}l=Math.max(1,parseInt(l)||1),this.state.columnCount!==l&&this.setState({columnCount:l})}itemsInColumns(){const n=this.state.columnCount,s=new Array(n),a=V.Children.toArray(this.props.children);for(let l=0;l<a.length;l++){const i=l%n;s[i]||(s[i]=[]),s[i].push(a[l])}return s}renderColumns(){const{column:n,columnAttrs:s={},columnClassName:a}=this.props,l=this.itemsInColumns(),i=`${100/l.length}%`;let o=a;o&&typeof o!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof o>"u"&&(o="my-masonry-grid_column"));const r=R(R(R({},n),s),{},{style:R(R({},s.style),{},{width:i}),className:o});return l.map((m,c)=>V.createElement("div",W({},r,{key:c}),m))}logDeprecated(n){console.error("[Masonry]",n)}render(){const n=this.props,{children:s,breakpointCols:a,columnClassName:l,columnAttrs:i,column:o,className:r}=n,m=Ft(n,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let c=r;return typeof r!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof r>"u"&&(c="my-masonry-grid")),V.createElement("div",W({},m,{className:c}),this.renderColumns())}}Ee.defaultProps=$t;const X={1:{fontSize:14,lineHeight:19},2:{fontSize:18,lineHeight:28},3:{fontSize:24,lineHeight:36},4:{fontSize:36,lineHeight:48},5:{fontSize:48,lineHeight:60}};function Rt(e,n,s){if(!n)return;n.style.fontSize=null,n.style.lineHeight=null;const a=n.clientWidth;if(a===0||!s)return;const l=document.createElement("div");l.style.display="inline-block",l.style.fontSize="10px",l.style.fontWeight="600",l.style.lineHeight="10px",l.style.position="absolute",l.style.whiteSpace="pre-wrap",l.style.wordWrap="break-word",l.style.pointerEvents="none",l.style.visibility="hidden",document.body.appendChild(l);let i;const r=e.split(" ").map(E=>(l.textContent=E.toString(),l.clientWidth)),m=Math.max(...r),c=Math.floor(a*10/m);c<18?i=1:c>=18&&c<24?i=2:c>=24&&c<36?i=3:c>=36&&c<48?i=4:c>=48&&(i=5);let{lineHeight:u,fontSize:h}=X[i];l.textContent=e,l.style.width=`${a}px`,l.style.fontSize=`${h}px`,l.style.lineHeight=`${u}px`;const b=l.clientHeight/u;b>4&&b<6?i=4:b>=6&&b<9?i=3:b>=9&&b<11?i=2:b>=11&&(i=1),document.body.removeChild(l),u=X[i].lineHeight,h=X[i].fontSize,n.style.fontSize=`${h}px`,n.style.lineHeight=`${u}px`}function Mt(e){const n=N();return t.jsx(J.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.1}},children:t.jsxs(Ge,{className:v("cursor-pointer",e.className),onClick:()=>n(bt(e.note.id)),children:[e.note.image&&e.note.image!==""&&t.jsx("img",{src:e.note.image,className:"w-full block",alt:"note"}),e.note.title&&e.note.title!==""&&t.jsx(k,{className:"px-20 my-16 text-14 font-semibold",children:e.note.title}),e.note.content&&e.note.content!==""&&t.jsx(k,{className:"px-20 my-16 ",component:"div",children:t.jsx("div",{className:v("w-full break-words",e.variateDescSize?"font-500":"text-14"),ref:s=>{setTimeout(()=>Rt(e.note.content,s,e.variateDescSize))},children:e.note.content})}),e.note.tasks&&e.note.tasks.length>0&&t.jsx("ul",{className:"px-20 my-16 flex flex-wrap list-reset",children:e.note.tasks.map(s=>t.jsxs("li",{className:"flex items-center w-full",children:[t.jsx(d,{color:s.completed?"secondary":"disabled",size:20,children:"heroicons-outline:check-circle"}),t.jsx(k,{className:v("truncate mx-8",s.completed&&"line-through"),color:s.completed?"text.secondary":"inherit",children:s.content})]},s.id))}),(e.note.labels.length>0||e.note.reminder)&&t.jsxs("div",{className:"px-20 my-16 flex flex-wrap w-full -mx-2",children:[e.note.reminder&&t.jsx(Te,{className:"mt-4 mx-2 max-w-full",date:e.note.reminder}),e.note.labels.map(s=>t.jsx(Fe,{id:s,className:"mt-4 mx-2 max-w-full",linkable:!0},s))]})]})})}function Vt(e){const n=y(ht),s=y(Ie),a=y(ze),l=G(),[i,o]=C.useState(null);return C.useEffect(()=>{function r(){let m=n;return a.length===0||(m=fe.filterArrayByString(m,a)),m}n.length>0&&o(r())},[n,a,l]),!i||i.length===0?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(k,{color:"text.secondary",variant:"h5",children:"There are no notes!"})}):t.jsx("div",{className:"flex flex-wrap w-full",children:t.jsx(Ee,{breakpointCols:{default:6,1920:5,1600:4,1366:3,1280:4,960:3,600:2,480:1},className:"my-masonry-grid flex w-full",columnClassName:"my-masonry-grid_column flex flex-col p-8",children:i.map(r=>t.jsx(Mt,{note:r,className:"w-full rounded-20 shadow mb-16",variateDescSize:s},r.id))})})}const Bt=ye(Vt);function ae(e){const n=N(),s=y(ze);return t.jsx(Je,{component:J.div,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex flex-1 items-center px-16 rounded-full h-40 w-fullsm:max-w-240",placeholder:"Search note",variant:"outlined",fullWidth:!0,startAdornment:t.jsx(F,{position:"start",children:t.jsx(d,{color:"disabled",children:"heroicons-solid:search"})}),inputProps:{"aria-label":"Search"},value:s,onChange:a=>n(ft(a))})}ae.propTypes={};ae.defaultProps={trigger:t.jsx(g,{className:"w-64 h-64",size:"large",children:t.jsx(d,{children:"heroicons-outline:search"})})};function Wt(e){const n=N(),s=y(Ie);return t.jsxs("div",{className:"flex flex-col sm:flex-row flex-1 items-center justify-between p-8 sm:p-24 sm:px-32 relative",children:[t.jsxs("div",{className:"flex shrink items-center sm:w-224",children:[t.jsx(Ke,{lgUp:!0,children:t.jsx(g,{onClick:a=>e.onSetSidebarOpen(!0),"aria-label":"open left sidebar",size:"large",children:t.jsx(d,{children:"heroicons-outline:menu"})})}),t.jsx("div",{className:"flex items-center",children:t.jsx(k,{component:J.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-24 md:text-32 font-extrabold tracking-tight leading-none",children:"Notes"})})]}),t.jsxs("div",{className:"flex flex-1 w-full sm:w-auto items-center justify-end space-x-12",children:[t.jsx(A,{title:"Toggle Variate Description Size",children:t.jsx(g,{onClick:a=>n(xt()),size:"large",children:t.jsx(d,{color:s?"action":"disabled",children:"heroicons-solid:switch-vertical"})})}),t.jsx(ae,{})]})]})}const M=Ce(P)(({theme:e,active:n})=>({color:"inherit!important",textDecoration:"none!important",height:40,width:"100%",borderRadius:20,paddingLeft:16,paddingRight:16,marginBottom:8,fontWeight:500,"&.active":{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, .05)!important":"rgba(255, 255, 255, .1)!important",pointerEvents:"none","& .list-item-icon":{color:e.palette.secondary.main}},"& .list-item-icon":{marginRight:16}}));function Ht(e){const n=N(),s=y(te);return t.jsx("div",{className:"px-16 py-24",children:t.jsx("div",{component:J.div,initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},children:t.jsxs(Y,{className:"",children:[t.jsxs(M,{button:!0,component:B,to:"/apps/notes",end:!0,activeClassName:"active",children:[t.jsx(d,{className:"list-item-icon",color:"disabled",children:"heroicons-outline:pencil-alt"}),t.jsx(O,{className:"truncate",primary:"Notes",disableTypography:!0})]}),t.jsxs(M,{button:!0,component:B,to:"/apps/notes/reminders",end:!0,activeClassName:"active",children:[t.jsx(d,{className:"list-item-icon",color:"disabled",children:"heroicons-outline:bell"}),t.jsx(O,{className:"truncate",primary:"Reminders",disableTypography:!0})]}),t.jsxs(M,{button:!0,component:B,to:"/apps/notes/archive",activeClassName:"active",children:[t.jsx(d,{className:"list-item-icon",color:"disabled",children:"heroicons-outline:archive"}),t.jsx(O,{className:"truncate",primary:"Archive",disableTypography:!0})]}),s.map(a=>t.jsxs(M,{button:!0,component:B,to:`/apps/notes/labels/${a.id}`,end:!0,activeClassName:"active",children:[t.jsx(d,{className:"list-item-icon",color:"disabled",children:"heroicons-outline:tag"}),t.jsx(O,{className:"truncate",primary:a.title,disableTypography:!0})]},a.id)),t.jsxs(M,{button:!0,onClick:a=>n(st()),children:[t.jsx(d,{className:"list-item-icon",color:"disabled",children:"heroicons-outline:pencil"}),t.jsx(O,{className:"truncate",primary:"Edit Labels",disableTypography:!0})]})]})})})}const qt=Qe({notes:yt,labels:it}),Ut=Ce(Ze)(({theme:e})=>({"& .FusePageCarded-header":{},"& .FusePageCarded-sidebar":{},"& .FusePageCarded-leftSidebar":{}}));function _t(e){const n=N(),s=et(o=>o.breakpoints.down("lg")),[a,l]=C.useState(!s),i=G();return C.useEffect(()=>{n(ne(i)),n(Ne())},[n,i]),t.jsx(t.Fragment,{children:t.jsx(Ut,{header:t.jsx(Wt,{onSetSidebarOpen:l}),content:t.jsxs("div",{className:"flex flex-col w-full items-center p-24",children:[t.jsxs(tt,{className:"w-full rounded-16 border p-12 flex flex-col items-center",sx:{backgroundColor:o=>o.palette.mode==="light"?oe(o.palette.background.default,.4):oe(o.palette.background.default,.02)},children:[t.jsx(Tt,{}),t.jsx(Bt,{})]}),t.jsx(zt,{}),t.jsx(mt,{})]}),leftSidebarOpen:a,leftSidebarOnClose:()=>{l(!1)},leftSidebarContent:t.jsx(Ht,{}),scroll:s?"normal":"content"})})}const Xt=Xe("notesApp",qt)(_t);export{Xt as default};
